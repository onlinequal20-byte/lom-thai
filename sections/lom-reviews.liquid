{{ 'lom-natural.css' | asset_url | stylesheet_tag }}

<section class="lom-reviews">
  <div class="lom-container">
    <h2 class="lom-heading lom-fade-in">{{ section.settings.heading }}</h2>

    <div class="lom-reviews-stats-bar lom-fade-in">
      <div class="lom-reviews-stats-bar__item">
        <span class="lom-reviews-stats-bar__number">{{ section.settings.avg_rating | default: '4.8' }}</span>
        <span class="lom-reviews-stats-bar__stars"><span class="lom-star"></span><span class="lom-star"></span><span class="lom-star"></span><span class="lom-star"></span><span class="lom-star"></span></span>
        <span class="lom-reviews-stats-bar__label">average rating</span>
      </div>
      <div class="lom-reviews-stats-bar__divider"></div>
      <div class="lom-reviews-stats-bar__item">
        <span class="lom-reviews-stats-bar__number">{{ section.settings.total_reviews | default: '1,200+' }}</span>
        <span class="lom-reviews-stats-bar__label">verified reviews</span>
      </div>
      <div class="lom-reviews-stats-bar__divider"></div>
      <div class="lom-reviews-stats-bar__item">
        <span class="lom-reviews-stats-bar__number">{{ section.settings.recommend_pct | default: '97' }}%</span>
        <span class="lom-reviews-stats-bar__label">would recommend</span>
      </div>
    </div>

    <div class="lom-reviews-grid">
      {% for block in section.blocks %}
        <div class="lom-review-card lom-fade-in" {{ block.shopify_attributes }}>
          <div class="lom-review-stars">
            {% assign stars = block.settings.stars | default: 5 %}
            {% for i in (1..stars) %}
              <span class="lom-star"></span>
            {% endfor %}
          </div>
          <p class="lom-review-text">"{{ block.settings.text }}"</p>
          <div class="lom-review-author">
            {% if block.settings.avatar != blank %}
              <img class="lom-review-avatar lom-review-avatar--img" src="{{ block.settings.avatar | image_url: width: 96 }}" alt="{{ block.settings.name }}" loading="lazy">
            {% else %}
              <div class="lom-review-avatar">{{ block.settings.name | truncate: 2, '' | upcase }}</div>
            {% endif %}
            <div class="lom-review-author-info">
              <strong>{{ block.settings.name }}</strong>
              {% if block.settings.title != blank %}
                <span class="lom-review-title">{{ block.settings.title }}</span>
              {% endif %}
              {% if block.settings.location != blank %}
                <span>{{ block.settings.location }}</span>
              {% endif %}
              <span class="lom-review-verified"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg> Verified Purchase</span>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Lom Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "They Were Skeptical Too. Then They Tried It."
    },
    {
      "type": "text",
      "id": "avg_rating",
      "label": "Average rating",
      "default": "4.8"
    },
    {
      "type": "text",
      "id": "total_reviews",
      "label": "Total reviews",
      "default": "1,200+"
    },
    {
      "type": "text",
      "id": "recommend_pct",
      "label": "Recommend percentage",
      "default": "97"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Reviewer photo"
        },
        {
          "type": "range",
          "id": "stars",
          "label": "Stars",
          "min": 1,
          "max": 5,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review text",
          "default": "I was popping 4 Advil a day for my migraines. Now I just reach for this stick. My liver thanks me."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Reviewer name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "title",
          "label": "Reviewer title/profession",
          "default": "Nurse"
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "Texas"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lom Reviews",
      "blocks": [
        { "type": "review", "settings": { "stars": 5, "text": "I was popping 4 Advil a day for my migraines. Now I just reach for this stick. My liver thanks me.", "name": "Sarah M.", "title": "Nurse", "location": "Texas" } },
        { "type": "review", "settings": { "stars": 5, "text": "I drive 11 hours a day. Energy drinks were destroying my stomach. This thing keeps me sharp without the crash.", "name": "Marco V.", "title": "Truck Driver", "location": "Ohio" } },
        { "type": "review", "settings": { "stars": 5, "text": "I bought it as a joke for my husband. He now panics if he can't find it before leaving the house.", "name": "Anna P.", "title": "", "location": "Portland" } }
      ]
    }
  ]
}
{% endschema %}

