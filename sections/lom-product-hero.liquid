{{ 'lom-natural.css' | asset_url | stylesheet_tag }}

{%- assign product = product -%}

<section class="lom-product-hero">
  <div class="lom-container--wide">
    <div class="lom-product-hero__grid">
      {%- comment -%} Gallery {%- endcomment -%}
      <div class="lom-product-hero__gallery">
        <div class="lom-product-hero__main-image" id="lom-main-image">
          {% if product.featured_image %}
            <img src="{{ product.featured_image | image_url: width: 1200 }}" alt="{{ product.featured_image.alt | default: product.title }}" id="lom-product-img" loading="eager">
          {% endif %}
        </div>
        {% if product.images.size > 1 %}
          <div class="lom-product-hero__thumbs">
            {% for image in product.images %}
              <button class="lom-product-hero__thumb {% if forloop.first %}is-active{% endif %}" onclick="document.getElementById('lom-product-img').src='{{ image | image_url: width: 1200 }}'; document.querySelectorAll('.lom-product-hero__thumb').forEach(function(t){t.classList.remove('is-active')}); this.classList.add('is-active');">
                <img src="{{ image | image_url: width: 120 }}" alt="{{ image.alt | default: product.title }}" loading="lazy" width="120">
              </button>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      {%- comment -%} Product Info {%- endcomment -%}
      <div class="lom-product-hero__info">
        <div class="lom-product-hero__breadcrumb">
          <a href="/">Home</a> / <a href="/collections/all">Shop</a> / <span>{{ product.title }}</span>
        </div>

        {%- comment -%} Social proof mini {%- endcomment -%}
        <div class="lom-product-hero__proof">
          <span class="lom-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
          <span>{{ section.settings.review_count }} Reviews</span>
        </div>

        <h1 class="lom-product-hero__title">{{ product.title }}</h1>

        {% if section.settings.subtitle != blank %}
          <p class="lom-product-hero__subtitle">{{ section.settings.subtitle }}</p>
        {% endif %}

        {%- comment -%} Urgency timer {%- endcomment -%}
        {% if section.settings.show_urgency %}
          <div class="lom-urgency">
            <div class="lom-urgency__bar">
              <div class="lom-urgency__progress" id="lom-urgency-progress"></div>
            </div>
            <div class="lom-urgency__content">
              <span class="lom-urgency__icon">üî•</span>
              <span class="lom-urgency__text">{{ section.settings.urgency_text | default: 'Sale ends in' }}</span>
              <div class="lom-urgency__timer" id="lom-urgency-timer">
                <div class="lom-urgency__unit">
                  <span class="lom-urgency__number" id="lom-timer-hours">00</span>
                  <span class="lom-urgency__label">hrs</span>
                </div>
                <span class="lom-urgency__sep">:</span>
                <div class="lom-urgency__unit">
                  <span class="lom-urgency__number" id="lom-timer-minutes">00</span>
                  <span class="lom-urgency__label">min</span>
                </div>
                <span class="lom-urgency__sep">:</span>
                <div class="lom-urgency__unit">
                  <span class="lom-urgency__number" id="lom-timer-seconds">00</span>
                  <span class="lom-urgency__label">sec</span>
                </div>
              </div>
            </div>
            {% if section.settings.urgency_subtext != blank %}
              <p class="lom-urgency__subtext">{{ section.settings.urgency_subtext }}</p>
            {% endif %}
          </div>
        {% endif %}

        <div class="lom-product-hero__price">
          {% if product.compare_at_price > product.price %}
            <span class="lom-product-hero__price-compare">{{ product.compare_at_price | money }}</span>
          {% endif %}
          <span class="lom-product-hero__price-current">{{ product.price | money }}</span>
          {% if product.compare_at_price > product.price %}
            {% assign savings = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price %}
            <span class="lom-product-hero__price-save">Save {{ savings }}%</span>
          {% endif %}
        </div>

        {%- comment -%} Variant picker {%- endcomment -%}
        {% if product.has_only_default_variant == false %}
          {% for option in product.options_with_values %}
            <div class="lom-product-hero__option">
              <label class="lom-product-hero__option-label">{{ option.name }}</label>
              <div class="lom-product-hero__option-values">
                {% for value in option.values %}
                  <button class="lom-product-hero__option-btn {% if option.selected_value == value %}is-active{% endif %}">{{ value }}</button>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        {% endif %}

        {%- comment -%} Bundle offer {%- endcomment -%}
        {% if section.settings.show_bundle %}
          <div class="lom-product-hero__bundles">
            <div class="lom-product-hero__bundle is-active" data-quantity="1">
              <div class="lom-product-hero__bundle-radio"></div>
              <div class="lom-product-hero__bundle-info">
                <strong>1x Lom Thai</strong>
                <span>Try it out</span>
              </div>
              <div class="lom-product-hero__bundle-price">{{ product.price | money }}</div>
            </div>
            <div class="lom-product-hero__bundle lom-product-hero__bundle--popular" data-quantity="3">
              <span class="lom-product-hero__bundle-badge">Most Popular</span>
              <div class="lom-product-hero__bundle-radio"></div>
              <div class="lom-product-hero__bundle-info">
                <strong>3x Lom Thai</strong>
                <span>One for every bag</span>
              </div>
              <div class="lom-product-hero__bundle-price">
                <small class="lom-product-hero__bundle-was">{{ product.price | times: 3 | money }}</small>
                {{ product.price | times: 3 | times: 80 | divided_by: 100 | money }}
              </div>
            </div>
            <div class="lom-product-hero__bundle" data-quantity="5">
              <span class="lom-product-hero__bundle-badge lom-product-hero__bundle-badge--value">Best Value</span>
              <div class="lom-product-hero__bundle-radio"></div>
              <div class="lom-product-hero__bundle-info">
                <strong>5x Lom Thai</strong>
                <span>Share with family</span>
              </div>
              <div class="lom-product-hero__bundle-price">
                <small class="lom-product-hero__bundle-was">{{ product.price | times: 5 | money }}</small>
                {{ product.price | times: 5 | times: 70 | divided_by: 100 | money }}
              </div>
            </div>
          </div>
        {% endif %}

        {%- comment -%} Guarantee badges {%- endcomment -%}
        <div class="lom-product-hero__guarantees">
          <div class="lom-product-hero__guarantee">
            <span class="lom-product-hero__guarantee-icon">üõ°Ô∏è</span>
            <span>30-Day Guarantee</span>
          </div>
          <div class="lom-product-hero__guarantee">
            <span class="lom-product-hero__guarantee-icon">üöö</span>
            <span>Free Shipping</span>
          </div>
          <div class="lom-product-hero__guarantee">
            <span class="lom-product-hero__guarantee-icon">üîí</span>
            <span>Secure Checkout</span>
          </div>
        </div>

        {%- comment -%} Add to Cart {%- endcomment -%}
        {% form 'product', product, id: 'lom-product-form' %}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          <button type="submit" class="lom-btn-primary lom-btn-full lom-product-hero__atc" {% unless product.available %}disabled{% endunless %}>
            {% if product.available %}
              {{ section.settings.atc_text | default: 'Add to Cart' }} ‚Äî {{ product.price | money }}
            {% else %}
              Sold Out
            {% endif %}
          </button>
        {% endform %}

        {%- comment -%} Social proof buyers bar {%- endcomment -%}
        <div class="lom-hero-buyers">
          <div class="lom-hero-buyers__avatars">
            <span class="lom-hero-buyers__avatar" style="background:#c5d9c7;z-index:4">S</span>
            <span class="lom-hero-buyers__avatar" style="background:#e8c9b8;z-index:3">M</span>
            <span class="lom-hero-buyers__avatar" style="background:#b8cfe8;z-index:2">J</span>
          </div>
          <span class="lom-hero-buyers__text">{{ section.settings.buyers_text | default: 'Sarah and 438 people purchased' }}</span>
        </div>

        {%- comment -%} Payment icons {%- endcomment -%}
        <div class="lom-hero-payments">
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-visa"><title id="pi-visa">Visa</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path d="M28.3 10.1H28c-.4 1-.7 1.5-1 3h1.9c-.3-1.5-.3-2.2-.6-3zm2.9 5.9h-1.7c-.1 0-.1 0-.2-.1l-.2-.9-.1-.2h-2.4c-.1 0-.2 0-.2.2l-.3.9c0 .1-.1.1-.1.1h-2.1l.2-.5L27 8.7c0-.5.3-.7.8-.7h1.5c.1 0 .2 0 .2.2l1.4 6.5c.1.4.2.7.2 1.1zm-13.4-.3l.4-1.8c.1 0 .2.1.2.1.7.3 1.4.5 2.1.4.2 0 .5-.1.7-.2.5-.2.5-.7.1-1.1-.2-.2-.5-.3-.8-.5-.4-.2-.8-.4-1.1-.7-1.2-1-.8-2.4-.1-3.1.6-.4.9-.8 1.7-.8 1.2 0 2.5 0 3.1.2h.1c-.1.6-.2 1.1-.4 1.7-.5-.2-1-.4-1.5-.4-.3 0-.6 0-.9.1-.2 0-.3.1-.4.2-.2.2-.2.5 0 .7l.5.4c.4.2.8.4 1.1.6.5.3 1 .8 1.1 1.4.2.9-.1 1.7-.9 2.3-.5.4-.7.6-1.4.6-1.4 0-2.5.1-3.4-.2-.1.2-.1.2-.2.1zm-3.5.3c.1-.7.1-.7.2-1 .5-2.2 1-4.5 1.4-6.7.1-.2.1-.3.3-.3H18c-.2 1.2-.4 2.1-.7 3.2-.3 1.5-.6 3-1 4.5 0 .2-.1.2-.3.2M5 8.2c0-.1.2-.2.3-.2h3.4c.5 0 .9.3 1 .8l.9 4.4c0 .1 0 .1.1.2 0-.1.1-.1.1-.1l2.1-5.1c-.1-.1 0-.2.1-.2h2.1c0 .1 0 .1-.1.2l-3.1 7.3c-.1.2-.1.3-.2.4-.1.1-.3 0-.5 0H9.7c-.1 0-.2 0-.2-.2L7.9 9.5c-.2-.2-.5-.5-.9-.6-.6-.3-1.7-.5-1.9-.5L5 8.2z" fill="#142688"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-master"><title id="pi-master">Mastercard</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><circle fill="#EB001B" cx="15" cy="12" r="7"/><circle fill="#F79E1B" cx="23" cy="12" r="7"/><path fill="#FF5F00" d="M22 12c0-2.4-1.2-4.5-3-5.7-1.8 1.3-3 3.4-3 5.7s1.2 4.5 3 5.7c1.8-1.2 3-3.3 3-5.7z"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-amex"><title id="pi-amex">American Express</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#006FCF" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path fill="#FFF" d="M8.971 10.268l.774 1.876H8.203l.768-1.876zm16.075.078h-2.977v.827h2.929v1.239h-2.923v.922h2.977v.739l2.077-2.245-2.077-1.741-.006.259zm-14.063-2.34h3.995l.887 1.935.822-1.935h3.989v5.993l-3.13-.007-1.07-2.44-1.143 2.447H11.3l-.478-1.122H8.478l-.471 1.122H5.753l2.23-5.993zm14.07 0h4.21l1.476 1.58L32.27 8l2.645.006.006 5.993h-2.134l-1.596-1.725-1.663 1.725H24.99l.003-5.993h.06z"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-paypal"><title id="pi-paypal">PayPal</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path fill="#003087" d="M23.9 8.3c.2-1 0-1.7-.6-2.3-.6-.7-1.7-1-3.1-1h-4.1c-.3 0-.5.2-.6.5L14 15.6c0 .2.1.4.3.4h2.3l.6-3.5v.1c.1-.3.3-.5.6-.5h1.3c2.5 0 4.5-1 5-4 0-.1 0-.2.1-.3-.1 0-.1 0 0 0 .1-.5.1-1-.2-1.5z"/><path fill="#3086C8" d="M23.9 8.3c.2-1 0-1.7-.6-2.3-.6-.7-1.7-1-3.1-1h-4.1c-.3 0-.5.2-.6.5L14 15.6c0 .2.1.4.3.4h2.3l.6-3.5v.1c.1-.3.3-.5.6-.5h1.3c2.5 0 4.5-1 5-4 0-.1 0-.2.1-.3-.1 0-.1 0 0 0 .1-.5.1-1-.2-1.5z" opacity=".35"/><path fill="#012169" d="M15.5 8.3c0-.2.1-.3.2-.4.1-.1.2-.1.3-.1h4c.5 0 .9 0 1.3.1.1 0 .2 0 .3.1.1 0 .2.1.3.1.1 0 .1 0 .2.1.2.1.4.2.5.4.2-1 0-1.7-.6-2.3-.6-.7-1.7-1-3.1-1h-4.1c-.3 0-.5.2-.6.5L13 15.6c0 .2.1.4.3.4h2.3l1.1-4.6.8-3.1z"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-shopify"><title id="pi-shopify">Shop Pay</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#5A31F4" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path fill="#FFF" d="M21.4 9.6c-.3 0-.5.1-.7.2l-.2.1V8h-1.2v5.6h1.1v-.3c.2.2.5.4.9.4.8 0 1.5-.7 1.5-1.7v-.7c0-1-.6-1.7-1.4-1.7zm.2 3.2c-.3 0-.6-.2-.7-.4v-1.2c.1-.3.4-.5.7-.5.5 0 .7.4.7.8v.5c0 .5-.3.8-.7.8zm-5-3.2c-.9 0-1.5.6-1.5 1.4 0 .7.3 1.1.9 1.3l.6.2c.3.1.5.2.5.5 0 .3-.2.4-.6.4-.3 0-.7-.1-1.1-.4l-.4.8c.4.3 1 .5 1.5.5 1 0 1.5-.5 1.5-1.4 0-.7-.4-1.1-1-1.3l-.5-.2c-.3-.1-.4-.2-.4-.4 0-.2.2-.4.5-.4.3 0 .6.1.9.3l.4-.8c-.4-.3-.9-.5-1.3-.5zm3.1 0c-.3 0-.6.1-.8.3v-.2h-1.1V16h1.2v-2.4c.2.2.5.3.8.3.8 0 1.4-.7 1.4-1.7v-.6c-.1-1-.7-1.7-1.5-1.7zm.2 3.1c-.3 0-.5-.1-.7-.4v-1.2c.1-.3.4-.5.7-.5.4 0 .7.4.7.8v.5c-.1.5-.3.8-.7.8zm6.7-3c-.3 0-.7.2-.9.4V8h-1.2v5.6h1.2v-2.6c0-.4.2-.7.5-.7.3 0 .5.2.5.7v2.6h1.2V11c0-1-.5-1.3-1.3-1.3zm-13 .1h-1.8V8.6h-1.2v1.1h-.8v1h.8v2c0 .9.5 1.4 1.3 1.4.4 0 .7-.1 1-.3l-.3-.9c-.2.1-.3.2-.5.2-.3 0-.4-.2-.4-.5v-1.9h.9v-1z"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-sofort"><title id="pi-sofort">Sofort</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path fill="#ED1C24" d="M 27.5 9.6 C 27.5 11.3 26.1 12.7 24.4 12.7 C 22.7 12.7 21.3 11.3 21.3 9.6 C 21.3 7.9 22.7 6.5 24.4 6.5 C 26.1 6.5 27.5 7.9 27.5 9.6 Z"/><path fill="#393939" d="M 7.1 16.2 L 7.1 11.8 L 9.4 11.8 C 10.3 11.8 10.8 12.3 10.8 13 C 10.8 13.7 10.3 14.2 9.4 14.2 L 8.3 14.2 L 8.3 16.2 L 7.1 16.2 Z M 8.3 13.2 L 9.2 13.2 C 9.5 13.2 9.6 13 9.6 12.9 C 9.6 12.7 9.5 12.6 9.2 12.6 L 8.3 12.6 L 8.3 13.2 Z M 10.7 14.2 L 12.5 11.8 L 14 11.8 L 12.3 14 L 14.1 16.2 L 12.6 16.2 L 10.8 14 L 10.7 14.2 Z M 14.4 14 C 14.4 12.8 15.3 11.7 16.7 11.7 C 18.1 11.7 19 12.8 19 14 C 19 15.2 18.1 16.3 16.7 16.3 C 15.3 16.3 14.4 15.2 14.4 14 Z M 17.8 14 C 17.8 13.3 17.3 12.8 16.7 12.8 C 16 12.8 15.5 13.3 15.5 14 C 15.5 14.7 16 15.2 16.7 15.2 C 17.3 15.2 17.8 14.7 17.8 14 Z M 19.4 11.8 L 22.5 11.8 L 22.5 12.8 L 20.6 12.8 L 20.6 13.5 L 22.2 13.5 L 22.2 14.5 L 20.6 14.5 L 20.6 16.2 L 19.4 16.2 L 19.4 11.8 Z M 28.3 11.8 L 30 11.8 L 30 12.8 L 28.3 12.8 L 28.3 13.6 L 29.8 13.6 L 29.8 14.6 L 28.3 14.6 L 28.3 15.3 L 30 15.3 L 30 16.3 L 27.1 16.3 L 27.1 11.8 Z M 30.4 11.8 L 32.3 11.8 C 33.2 11.8 33.7 12.4 33.7 13 C 33.7 13.5 33.4 13.9 32.9 14 L 33.8 16.2 L 32.5 16.2 L 31.7 14.2 L 31.6 14.2 L 31.6 16.2 L 30.4 16.2 L 30.4 11.8 Z M 31.6 13.4 L 32.1 13.4 C 32.4 13.4 32.6 13.2 32.6 13 C 32.6 12.7 32.4 12.6 32.1 12.6 L 31.6 12.6 L 31.6 13.4 Z"/><path fill="#ED1C24" d="M 22.5 9.6 C 22.5 7.5 24.1 5.9 26 5.5 L 26 5.1 L 23 5.1 C 21.4 5.1 20.2 6.1 20.2 7.7 L 20.2 9.6 L 22.5 9.6 Z"/></svg>
          </span>
          <span class="lom-hero-payments__icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 24" width="38" height="24" role="img" aria-labelledby="pi-unionpay"><title id="pi-unionpay">Union Pay</title><path opacity=".07" d="M35 0H3C1.3 0 0 1.3 0 3v18c0 1.7 1.4 3 3 3h32c1.7 0 3-1.3 3-3V3c0-1.7-1.4-3-3-3z"/><path fill="#fff" d="M35 1c1.1 0 2 .9 2 2v18c0 1.1-.9 2-2 2H3c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h32"/><path fill="#E21836" d="M11.6 3.5h6.8c1.2 0 1.8.8 1.5 2L17.7 16c-.3 1.2-1.4 2-2.6 2H8.3c-1.2 0-1.8-.8-1.5-2l2.2-10.5c.3-1.2 1.4-2 2.6-2z"/><path fill="#00447C" d="M17.3 3.5h7.5c1.2 0 1.8.8 1.5 2L24.1 16c-.3 1.2-1.4 2-2.6 2h-7.5c-1.2 0-1.8-.8-1.5-2l2.2-10.5c.3-1.2 1.4-2 2.6-2z"/><path fill="#007B84" d="M23.3 3.5h7c1.2 0 1.8.8 1.5 2L29.6 16c-.3 1.2-1.4 2-2.6 2h-7c-1.2 0-1.8-.8-1.5-2l2.2-10.5c.3-1.2 1.4-2 2.6-2z"/><path fill="#FFF" d="M13.7 7.5h1.2l-1.4 5.6h-1.2l1.4-5.6zm4.1 0h1.1l.1 3.7 2-3.7h1.2l-3.1 5.6h-1.1l-.2-5.6zm-2.3 0h1.2l-1.4 5.6h-1.2l1.4-5.6zm7.4 2.7l.7-2.7h1.2l-1.4 5.6h-1.2l.5-1.8h-1.7l-.5 1.8h-1.2l1.4-5.6h1.2l-.7 2.7h1.7z"/></svg>
          </span>
        </div>

        {%- comment -%} Trust row: Safe Payment / Free Shipping / Fast Delivery {%- endcomment -%}
        <div class="lom-hero-trust-row">
          <div class="lom-hero-trust-row__item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v2m0 8h.01"/><path d="M9.5 10.5a2.5 2.5 0 115 0c0 1.5-2.5 2-2.5 4"/></svg>
            <span>Safe Payment</span>
          </div>
          <div class="lom-hero-trust-row__item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3 7h7l-5.5 4 2 7L12 16l-6.5 4 2-7L2 9h7z"/></svg>
            <span>Free Shipping</span>
          </div>
          <div class="lom-hero-trust-row__item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            <span>Fast Delivery</span>
          </div>
        </div>

        {%- comment -%} Featured review carousel {%- endcomment -%}
        {% assign review_blocks = section.blocks | where: 'type', 'review' %}
        {% if review_blocks.size > 0 %}
          <div class="lom-hero-review-carousel" id="lom-review-carousel">
            {% for block in review_blocks %}
              <div class="lom-hero-review-card {% if forloop.first %}is-active{% endif %}" {{ block.shopify_attributes }}>
                <div class="lom-hero-review-card__inner">
                  <div class="lom-hero-review-card__avatar">
                    {{ block.settings.name | truncate: 1, '' | upcase }}
                  </div>
                  <div class="lom-hero-review-card__info">
                    <div class="lom-hero-review-card__name">
                      {{ block.settings.name }}
                      <span class="lom-hero-review-card__verified">‚úì</span>
                    </div>
                    <div class="lom-hero-review-card__location">{{ block.settings.location }}</div>
                    <div class="lom-hero-review-card__stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="lom-hero-review-card__text">{{ block.settings.text }}</p>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          <div class="lom-hero-review-nav">
            <strong>{{ review_blocks.size }}</strong> <span>New Reviews</span>
            <div class="lom-hero-review-dots" id="lom-review-dots">
              {% for block in review_blocks %}
                <span class="lom-hero-review-dot {% if forloop.first %}is-active{% endif %}" data-index="{{ forloop.index0 }}"></span>
              {% endfor %}
            </div>
          </div>
        {% endif %}

        {%- comment -%} Collapsible accordions {%- endcomment -%}
        {% assign accordion_blocks = section.blocks | where: 'type', 'accordion' %}
        {% if accordion_blocks.size > 0 %}
          <div class="lom-hero-accordions">
            {% for block in accordion_blocks %}
              <div class="lom-hero-accordion" {{ block.shopify_attributes }}>
                <button class="lom-hero-accordion__trigger" onclick="this.parentElement.classList.toggle('is-open')">
                  <span>{{ block.settings.heading }}</span>
                  <span class="lom-hero-accordion__icon">+</span>
                </button>
                <div class="lom-hero-accordion__content">
                  <div class="lom-hero-accordion__body">{{ block.settings.content }}</div>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{%- comment -%} Sticky mobile ATC bar {%- endcomment -%}
<div class="lom-sticky-atc" id="lom-sticky-atc">
  <div class="lom-sticky-atc__inner">
    <div class="lom-sticky-atc__info">
      <div class="lom-sticky-atc__title">{{ product.title }}</div>
      <div class="lom-sticky-atc__price">{{ product.price | money }}{% if product.compare_at_price > product.price %} <s style="color:var(--lom-text-light);font-size:12px">{{ product.compare_at_price | money }}</s>{% endif %}</div>
    </div>
    <button class="lom-sticky-atc__btn" onclick="document.getElementById('lom-product-form').querySelector('button[type=submit]').click()">
      Add to Cart
    </button>
  </div>
</div>

<script>
  // Urgency countdown timer
  (function(){
    var hoursEl = document.getElementById('lom-timer-hours');
    var minsEl = document.getElementById('lom-timer-minutes');
    var secsEl = document.getElementById('lom-timer-seconds');
    var progressEl = document.getElementById('lom-urgency-progress');
    if (!hoursEl) return;

    var totalHours = {{ section.settings.urgency_hours | default: 6 }};
    var storageKey = 'lom_urgency_end';
    var stored = localStorage.getItem(storageKey);
    var endTime;

    if (stored && parseInt(stored) > Date.now()) {
      endTime = parseInt(stored);
    } else {
      endTime = Date.now() + (totalHours * 60 * 60 * 1000);
      localStorage.setItem(storageKey, endTime);
    }

    var totalMs = totalHours * 60 * 60 * 1000;

    function tick() {
      var remaining = endTime - Date.now();
      if (remaining <= 0) {
        endTime = Date.now() + totalMs;
        localStorage.setItem(storageKey, endTime);
        remaining = totalMs;
      }
      var h = Math.floor(remaining / 3600000);
      var m = Math.floor((remaining % 3600000) / 60000);
      var s = Math.floor((remaining % 60000) / 1000);
      hoursEl.textContent = h < 10 ? '0' + h : h;
      minsEl.textContent = m < 10 ? '0' + m : m;
      secsEl.textContent = s < 10 ? '0' + s : s;
      if (progressEl) {
        progressEl.style.width = ((remaining / totalMs) * 100) + '%';
      }
    }
    tick();
    setInterval(tick, 1000);
  })();

  // Bundle selector
  document.querySelectorAll('.lom-product-hero__bundle').forEach(function(b){
    b.addEventListener('click', function(){
      document.querySelectorAll('.lom-product-hero__bundle').forEach(function(x){x.classList.remove('is-active')});
      this.classList.add('is-active');
    });
  });

  // Review carousel
  (function(){
    var cards = document.querySelectorAll('.lom-hero-review-card');
    var dots = document.querySelectorAll('.lom-hero-review-dot');
    if (cards.length < 2) return;
    var idx = 0;
    function show(i) {
      cards.forEach(function(c){ c.classList.remove('is-active'); });
      dots.forEach(function(d){ d.classList.remove('is-active'); });
      cards[i].classList.add('is-active');
      dots[i].classList.add('is-active');
      idx = i;
    }
    dots.forEach(function(d){
      d.addEventListener('click', function(){ show(parseInt(this.dataset.index)); });
    });
    setInterval(function(){ show((idx + 1) % cards.length); }, 5000);
  })();

  // Sticky mobile ATC
  (function(){
    var stickyEl = document.getElementById('lom-sticky-atc');
    var atcBtn = document.querySelector('.lom-product-hero__atc');
    if (!stickyEl || !atcBtn) return;
    var observer = new IntersectionObserver(function(entries){
      entries.forEach(function(e){
        if (e.isIntersecting) {
          stickyEl.classList.remove('is-visible');
        } else {
          stickyEl.classList.add('is-visible');
        }
      });
    }, { threshold: 0 });
    observer.observe(atcBtn);
  })();
</script>

{% schema %}
{
  "name": "Lom Product Hero",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Product subtitle",
      "default": "2-in-1 Nasal Inhaler & Roller ‚Äî Instant natural relief for headaches, fatigue, and congestion"
    },
    {
      "type": "text",
      "id": "review_count",
      "label": "Review count",
      "default": "2,847"
    },
    {
      "type": "text",
      "id": "atc_text",
      "label": "Add to cart text",
      "default": "Add to Cart"
    },
    {
      "type": "checkbox",
      "id": "show_bundle",
      "label": "Show bundle offers",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_urgency",
      "label": "Show urgency timer",
      "default": true
    },
    {
      "type": "text",
      "id": "urgency_text",
      "label": "Urgency text",
      "default": "Sale ends in"
    },
    {
      "type": "text",
      "id": "urgency_subtext",
      "label": "Urgency subtext",
      "default": "Order now to lock in this price + free shipping"
    },
    {
      "type": "range",
      "id": "urgency_hours",
      "label": "Timer hours",
      "min": 1,
      "max": 48,
      "step": 1,
      "default": 6
    },
    {
      "type": "text",
      "id": "buyers_text",
      "label": "Buyers social proof text",
      "default": "Sarah and 438 people purchased"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Key benefit",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon",
          "default": "‚ö°"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Benefit text",
          "default": "Works in seconds, not minutes"
        }
      ]
    },
    {
      "type": "review",
      "name": "Featured review",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Reviewer name",
          "default": "Sarah K."
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "Los Angeles"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review text",
          "default": "This thing is magic. Instant relief from my sinus headaches."
        }
      ]
    },
    {
      "type": "accordion",
      "name": "Accordion tab",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Description"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Accordion content here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lom Product Hero",
      "blocks": [
        { "type": "benefit", "settings": { "icon": "‚ö°", "text": "Works in seconds, not minutes" } },
        { "type": "benefit", "settings": { "icon": "üåø", "text": "5 natural plant-based ingredients" } },
        { "type": "benefit", "settings": { "icon": "üí∞", "text": "Only $0.03 per use ‚Äî lasts months" } },
        { "type": "review", "settings": { "name": "Sarah K.", "location": "Los Angeles", "text": "This thing is magic. Instant relief from my sinus headaches. I carry it everywhere now." } },
        { "type": "review", "settings": { "name": "James M.", "location": "New York", "text": "As a truck driver, this is a lifesaver. One sniff and I'm alert again." } },
        { "type": "review", "settings": { "name": "Anna P.", "location": "Netherlands", "text": "My whole family uses these. Best natural remedy we've found." } },
        { "type": "review", "settings": { "name": "Michelle T.", "location": "Texas", "text": "Working 12-hour nursing shifts, this keeps me going. Natural and it actually works." } },
        { "type": "accordion", "settings": { "heading": "Description", "content": "<p>Lom Thai is a 2-in-1 nasal inhaler and roller made from 5 natural Thai herbs: menthol, camphor, borneol, eucalyptus, and lemon oil. Instant relief for headaches, fatigue, congestion, and nausea.</p>" } },
        { "type": "accordion", "settings": { "heading": "Most Common Questions", "content": "<p><strong>Is this a drug?</strong> No ‚Äî 100% natural herbal aromatherapy.<br><strong>How fast does it work?</strong> Seconds. Instant effect upon inhaling.<br><strong>Is it TSA-friendly?</strong> Yes ‚Äî solid stick, pocket-sized, flight-safe.</p>" } },
        { "type": "accordion", "settings": { "heading": "Processing & Shipping", "content": "<p>Orders ship within 24 hours. Free shipping to US & EU. Delivery in 5-10 business days. 30-day money-back guarantee ‚Äî no questions asked.</p>" } }
      ]
    }
  ]
}
{% endschema %}

