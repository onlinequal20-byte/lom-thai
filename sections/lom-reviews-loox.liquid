{{ 'lom-reviews-loox.css' | asset_url | stylesheet_tag }}

{%- comment -%} SVG star templates {%- endcomment -%}
{%- capture star_svg -%}<svg class="loox-star" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>{%- endcapture -%}
{%- capture star_empty_svg -%}<svg class="loox-star loox-star--empty" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>{%- endcapture -%}
{%- capture star_small_svg -%}<svg class="loox-star loox-star--small" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>{%- endcapture -%}
{%- capture star_small_empty -%}<svg class="loox-star loox-star--small loox-star--empty" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>{%- endcapture -%}

{%- comment -%} Count block reviews {%- endcomment -%}
{%- assign block_count = 0 -%}
{%- for block in section.blocks -%}
  {%- if block.type == 'review' -%}
    {%- assign block_count = block_count | plus: 1 -%}
  {%- endif -%}
{%- endfor -%}

<section id="loox-reviews-{{ section.id }}" class="loox-reviews" data-section-id="{{ section.id }}">
  <div class="loox-reviews__container">

    <div class="loox-reviews__header">
      <h2 class="loox-reviews__heading">{{ section.settings.heading }}</h2>
      {% if section.settings.subheading != blank %}
        <p class="loox-reviews__subheading">{{ section.settings.subheading }}</p>
      {% endif %}
    </div>

    <!-- Stats bar -->
    <div class="loox-stats" data-loox-stats>
      <div class="loox-stats__block">
        <span class="loox-stats__number" data-loox-avg>{{ section.settings.avg_rating | default: '4.8' }}</span>
        <div class="loox-stats__stars">
          {{ star_svg }}{{ star_svg }}{{ star_svg }}{{ star_svg }}{{ star_svg }}
        </div>
        <span class="loox-stats__label">Average Rating</span>
      </div>
      <div class="loox-stats__divider"></div>
      <div class="loox-stats__block">
        <span class="loox-stats__number" data-loox-total>{{ section.settings.total_reviews | default: '1,200+' }}</span>
        <span class="loox-stats__label">Verified Reviews</span>
      </div>
      <div class="loox-stats__divider"></div>
      <div class="loox-stats__block">
        <span class="loox-stats__number" data-loox-pct>{{ section.settings.recommend_pct | default: '97' }}%</span>
        <span class="loox-stats__label">Would Recommend</span>
      </div>
    </div>

    <!-- Star distribution -->
    {% if section.settings.show_distribution %}
      <div class="loox-distribution" data-loox-distribution>
        {%- for i in (1..5) -%}
          {%- assign rev_i = 6 | minus: i -%}
          <div class="loox-distribution__row" data-filter-star="{{ rev_i }}">
            <span class="loox-distribution__label">{{ rev_i }} star{% if rev_i != 1 %}s{% endif %}</span>
            <div class="loox-distribution__bar">
              <div class="loox-distribution__fill" data-dist-bar="{{ rev_i }}" style="width: 0%"></div>
            </div>
            <span class="loox-distribution__count" data-dist-count="{{ rev_i }}">0</span>
          </div>
        {%- endfor -%}
      </div>
    {% endif %}

    <!-- Photo gallery -->
    {% if section.settings.show_photos %}
      <div class="loox-photos" data-loox-photos style="display:none;">
        <div class="loox-photos__track" data-loox-photos-track></div>
      </div>
    {% endif %}

    <!-- Toolbar -->
    <div class="loox-toolbar">
      <div class="loox-toolbar__filters">
        <button class="loox-filter-chip is-active" data-filter="all">All</button>
        <button class="loox-filter-chip" data-filter="5">5 Star</button>
        <button class="loox-filter-chip" data-filter="4">4 Star</button>
        <button class="loox-filter-chip" data-filter="3">3 Star</button>
        <button class="loox-filter-chip" data-filter="photo">With Photo</button>
      </div>
      <div class="loox-toolbar__right">
        <select class="loox-sort__select" data-loox-sort>
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
          <option value="highest">Highest Rated</option>
          <option value="lowest">Lowest Rated</option>
        </select>
        {% if section.settings.show_form %}
          <button class="loox-toolbar__write-btn" data-loox-open-modal>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
            Write a Review
          </button>
        {% endif %}
      </div>
    </div>

    <!-- Review cards grid -->
    <div class="loox-grid" data-loox-grid>
      <!-- User-submitted reviews injected here by JS (prepended) -->

      <!-- Curated reviews from theme editor blocks -->
      {%- for block in section.blocks -%}
        {%- if block.type == 'review' -%}
          <div class="loox-card" data-stars="{{ block.settings.stars }}" data-has-photo="{% if block.settings.photo != blank %}true{% else %}false{% endif %}" data-ts="0" {{ block.shopify_attributes }}>
            <div class="loox-card__top">
              <div class="loox-card__stars">
                {%- for i in (1..5) -%}
                  {%- if i <= block.settings.stars -%}{{ star_small_svg }}{%- else -%}{{ star_small_empty }}{%- endif -%}
                {%- endfor -%}
              </div>
              {% if block.settings.date != blank %}
                <span class="loox-card__date">{{ block.settings.date }}</span>
              {% endif %}
            </div>
            {% if block.settings.review_title != blank %}
              <h3 class="loox-card__title">{{ block.settings.review_title }}</h3>
            {% endif %}
            {% if block.settings.photo != blank %}
              <div class="loox-card__photo" data-loox-lightbox="{{ block.settings.photo | image_url: width: 1200 }}">
                <img src="{{ block.settings.photo | image_url: width: 600 }}" alt="Review photo by {{ block.settings.name }}" loading="lazy">
              </div>
            {% endif %}
            <p class="loox-card__text">"{{ block.settings.text }}"</p>
            <div class="loox-card__author">
              {% if block.settings.avatar != blank %}
                <div class="loox-card__avatar">
                  <img src="{{ block.settings.avatar | image_url: width: 96 }}" alt="{{ block.settings.name }}" loading="lazy">
                </div>
              {% else %}
                <div class="loox-card__avatar">{{ block.settings.name | truncate: 2, '' | upcase }}</div>
              {% endif %}
              <div class="loox-card__author-info">
                <span class="loox-card__name">{{ block.settings.name }}</span>
                <div class="loox-card__meta">
                  {% if block.settings.location != blank %}
                    <span class="loox-card__location">{{ block.settings.location }}</span>
                  {% endif %}
                  <span class="loox-card__verified">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
                    Verified
                  </span>
                </div>
              </div>
            </div>
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>

  </div>
</section>

<!-- Write a Review Modal -->
{% if section.settings.show_form %}
<div class="loox-modal-overlay" data-loox-modal>
  <div class="loox-modal">
    <button class="loox-modal__close" data-loox-close-modal aria-label="Close">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
    </button>

    <div data-loox-form-content>
      <h3 class="loox-modal__title">Write a Review</h3>

      <form id="loox-review-form-{{ section.id }}" data-loox-form>
        <!-- Star rating -->
        <div class="loox-form__group">
          <span class="loox-star-input__label">Your Rating</span>
          <div class="loox-star-input" data-loox-star-input>
            {%- for i in (1..5) -%}
              <svg class="loox-star-input__star" data-star="{{ i }}" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>
            {%- endfor -%}
          </div>
        </div>

        <!-- Review title -->
        <div class="loox-form__group">
          <label class="loox-form__label" for="loox-title-{{ section.id }}">Review Title</label>
          <input class="loox-form__input" type="text" id="loox-title-{{ section.id }}" data-field="title" placeholder="Sum it up in a few words" required>
        </div>

        <!-- Review body -->
        <div class="loox-form__group">
          <label class="loox-form__label" for="loox-body-{{ section.id }}">Your Review</label>
          <textarea class="loox-form__textarea" id="loox-body-{{ section.id }}" data-field="body" placeholder="What did you like or dislike? How do you use the product?" required></textarea>
        </div>

        <!-- Photo upload -->
        <div class="loox-form__group">
          <label class="loox-form__label">Add a Photo (optional)</label>
          <div class="loox-form__upload">
            <label class="loox-form__upload-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
              Upload Photo
              <input type="file" accept="image/*" hidden data-loox-photo-input>
            </label>
            <div class="loox-form__upload-preview" data-loox-photo-preview></div>
          </div>
        </div>

        <!-- Name -->
        <div class="loox-form__group">
          <label class="loox-form__label" for="loox-name-{{ section.id }}">Your Name</label>
          <input class="loox-form__input" type="text" id="loox-name-{{ section.id }}" data-field="name" placeholder="Jane D." required>
        </div>

        <!-- Email -->
        <div class="loox-form__group">
          <label class="loox-form__label" for="loox-email-{{ section.id }}">Email (won't be displayed)</label>
          <input class="loox-form__input" type="email" id="loox-email-{{ section.id }}" data-field="email" placeholder="jane@example.com" required>
        </div>

        <button type="submit" class="loox-form__submit">Submit Review</button>
      </form>
    </div>

    <div class="loox-form__success" data-loox-success>
      <div class="loox-form__success-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
      </div>
      <h4 class="loox-form__success-title">Thank you!</h4>
      <p class="loox-form__success-text">Your review has been posted and is now visible on the site.</p>
    </div>
  </div>
</div>

<!-- Photo lightbox -->
<div class="loox-lightbox" data-loox-lightbox-overlay>
  <button class="loox-lightbox__close" data-loox-lightbox-close>&times;</button>
  <img src="" alt="Review photo">
</div>
{% endif %}

<script>
(function() {
  var STORAGE_KEY = 'loox_reviews';
  var section = document.querySelector('[data-section-id="{{ section.id }}"]');
  if (!section) return;

  var grid = section.querySelector('[data-loox-grid]');
  var photosWrap = section.querySelector('[data-loox-photos]');
  var photosTrack = section.querySelector('[data-loox-photos-track]');

  /* ── SVG templates ── */
  var starSVG = '<svg class="loox-star loox-star--small" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>';
  var starEmptySVG = '<svg class="loox-star loox-star--small loox-star--empty" viewBox="0 0 20 20" fill="currentColor"><path d="M10 1.3l2.39 6.18h6.11l-4.95 3.64 1.89 6.18L10 13.64 4.56 17.3l1.89-6.18L1.5 7.48h6.11z"/></svg>';

  /* ── localStorage helpers ── */
  function getReviews() {
    try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }
    catch(e) { return []; }
  }
  function saveReview(review) {
    var reviews = getReviews();
    reviews.unshift(review);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(reviews));
  }

  /* ── Time ago helper ── */
  function timeAgo(ts) {
    var diff = Math.floor((Date.now() - ts) / 1000);
    if (diff < 60) return 'Just now';
    if (diff < 3600) return Math.floor(diff / 60) + ' min ago';
    if (diff < 86400) return Math.floor(diff / 3600) + ' hours ago';
    if (diff < 604800) return Math.floor(diff / 86400) + ' days ago';
    return Math.floor(diff / 604800) + ' weeks ago';
  }

  /* ── Escape HTML ── */
  function esc(s) {
    var d = document.createElement('div');
    d.textContent = s;
    return d.innerHTML;
  }

  /* ── Build a review card HTML ── */
  function buildCard(r) {
    var starsHTML = '';
    for (var i = 1; i <= 5; i++) {
      starsHTML += i <= r.stars ? starSVG : starEmptySVG;
    }
    var initials = (r.name || 'A').substring(0, 2).toUpperCase();
    var photoHTML = '';
    if (r.photo) {
      photoHTML = '<div class="loox-card__photo" data-loox-lightbox="' + r.photo + '"><img src="' + r.photo + '" alt="Review photo" loading="lazy"></div>';
    }
    return '<div class="loox-card loox-card--new" data-stars="' + r.stars + '" data-has-photo="' + (r.photo ? 'true' : 'false') + '" data-ts="' + r.ts + '">' +
      '<div class="loox-card__top"><div class="loox-card__stars">' + starsHTML + '</div>' +
      '<span class="loox-card__date">' + timeAgo(r.ts) + '</span></div>' +
      (r.title ? '<h3 class="loox-card__title">' + esc(r.title) + '</h3>' : '') +
      photoHTML +
      '<p class="loox-card__text">"' + esc(r.body) + '"</p>' +
      '<div class="loox-card__author">' +
      '<div class="loox-card__avatar">' + esc(initials) + '</div>' +
      '<div class="loox-card__author-info">' +
      '<span class="loox-card__name">' + esc(r.name) + '</span>' +
      '<div class="loox-card__meta"><span class="loox-card__verified"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg> Verified</span></div>' +
      '</div></div></div>';
  }

  /* ── Render saved reviews into grid ── */
  function renderSavedReviews() {
    var reviews = getReviews();
    reviews.forEach(function(r) {
      grid.insertAdjacentHTML('afterbegin', buildCard(r));
    });
    updateDistribution();
    updatePhotoGallery();
    bindLightbox();
  }

  /* ── Update distribution bars ── */
  function updateDistribution() {
    var cards = grid.querySelectorAll('.loox-card');
    var counts = {5:0, 4:0, 3:0, 2:0, 1:0};
    var total = cards.length;
    cards.forEach(function(c) {
      var s = parseInt(c.getAttribute('data-stars'));
      if (counts[s] !== undefined) counts[s]++;
    });
    for (var star = 1; star <= 5; star++) {
      var bar = section.querySelector('[data-dist-bar="' + star + '"]');
      var countEl = section.querySelector('[data-dist-count="' + star + '"]');
      if (bar) bar.style.width = (total > 0 ? Math.round(counts[star] / total * 100) : 0) + '%';
      if (countEl) countEl.textContent = counts[star];
    }
  }

  /* ── Update photo gallery ── */
  function updatePhotoGallery() {
    if (!photosTrack || !photosWrap) return;
    photosTrack.innerHTML = '';
    var hasPhotos = false;
    /* From localStorage reviews */
    getReviews().forEach(function(r) {
      if (r.photo) {
        hasPhotos = true;
        photosTrack.insertAdjacentHTML('beforeend',
          '<div class="loox-photos__item" data-loox-lightbox="' + r.photo + '"><img src="' + r.photo + '" alt="Review photo" loading="lazy"></div>');
      }
    });
    /* From block reviews with photos */
    grid.querySelectorAll('.loox-card:not(.loox-card--new) [data-loox-lightbox]').forEach(function(el) {
      hasPhotos = true;
      var src = el.getAttribute('data-loox-lightbox');
      photosTrack.insertAdjacentHTML('beforeend',
        '<div class="loox-photos__item" data-loox-lightbox="' + src + '"><img src="' + src + '" alt="Review photo" loading="lazy"></div>');
    });
    photosWrap.style.display = hasPhotos ? '' : 'none';
  }

  /* ── Filter chips ── */
  var chips = section.querySelectorAll('.loox-filter-chip');
  chips.forEach(function(chip) {
    chip.addEventListener('click', function() {
      chips.forEach(function(c) { c.classList.remove('is-active'); });
      chip.classList.add('is-active');
      var filter = chip.getAttribute('data-filter');
      grid.querySelectorAll('.loox-card').forEach(function(card) {
        if (filter === 'all') card.style.display = '';
        else if (filter === 'photo') card.style.display = card.getAttribute('data-has-photo') === 'true' ? '' : 'none';
        else card.style.display = card.getAttribute('data-stars') === filter ? '' : 'none';
      });
    });
  });

  /* ── Sort ── */
  var sortSelect = section.querySelector('[data-loox-sort]');
  if (sortSelect) {
    sortSelect.addEventListener('change', function() {
      var items = Array.from(grid.querySelectorAll('.loox-card'));
      items.sort(function(a, b) {
        var sa = parseInt(a.getAttribute('data-stars')), sb = parseInt(b.getAttribute('data-stars'));
        var ta = parseInt(a.getAttribute('data-ts') || 0), tb = parseInt(b.getAttribute('data-ts') || 0);
        switch(sortSelect.value) {
          case 'highest': return sb - sa;
          case 'lowest': return sa - sb;
          case 'oldest': return ta - tb;
          default: return tb - ta;
        }
      });
      items.forEach(function(item) { grid.appendChild(item); });
    });
  }

  /* ── Modal ── */
  var overlay = document.querySelector('[data-loox-modal]');
  var formContent = overlay ? overlay.querySelector('[data-loox-form-content]') : null;
  var successEl = overlay ? overlay.querySelector('[data-loox-success]') : null;
  if (overlay) {
    function openModal() {
      if (formContent) formContent.style.display = '';
      if (successEl) successEl.classList.remove('is-visible');
      overlay.classList.add('is-open');
      document.body.style.overflow = 'hidden';
    }
    function closeModal() {
      overlay.classList.remove('is-open');
      document.body.style.overflow = '';
    }
    document.querySelectorAll('[data-loox-open-modal]').forEach(function(b) { b.addEventListener('click', openModal); });
    document.querySelectorAll('[data-loox-close-modal]').forEach(function(b) { b.addEventListener('click', closeModal); });
    overlay.addEventListener('click', function(e) { if (e.target === overlay) closeModal(); });
  }

  /* ── Star rating input ── */
  var starInput = document.querySelector('[data-loox-star-input]');
  var currentRating = 0;
  if (starInput) {
    var starBtns = starInput.querySelectorAll('.loox-star-input__star');
    function setInputStars(n) {
      starBtns.forEach(function(s, i) { s.classList.toggle('is-active', i < n); });
    }
    starBtns.forEach(function(s) {
      s.addEventListener('mouseenter', function() { setInputStars(parseInt(s.getAttribute('data-star'))); });
      s.addEventListener('click', function() { currentRating = parseInt(s.getAttribute('data-star')); });
    });
    starInput.addEventListener('mouseleave', function() { setInputStars(currentRating); });
  }

  /* ── Photo upload preview ── */
  var photoInput = document.querySelector('[data-loox-photo-input]');
  var photoPreview = document.querySelector('[data-loox-photo-preview]');
  var uploadedPhoto = null;
  if (photoInput) {
    photoInput.addEventListener('change', function() {
      if (photoPreview) photoPreview.innerHTML = '';
      uploadedPhoto = null;
      if (photoInput.files && photoInput.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
          uploadedPhoto = e.target.result;
          if (photoPreview) {
            var img = document.createElement('img');
            img.src = uploadedPhoto;
            img.className = 'loox-form__upload-thumb';
            photoPreview.appendChild(img);
          }
        };
        reader.readAsDataURL(photoInput.files[0]);
      }
    });
  }

  /* ── Form submit → save to localStorage + inject card instantly ── */
  var form = document.querySelector('[data-loox-form]');
  if (form) {
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      if (currentRating < 1) { alert('Please select a star rating.'); return; }

      var review = {
        stars: currentRating,
        title: form.querySelector('[data-field="title"]').value.trim(),
        body: form.querySelector('[data-field="body"]').value.trim(),
        name: form.querySelector('[data-field="name"]').value.trim(),
        email: form.querySelector('[data-field="email"]').value.trim(),
        photo: uploadedPhoto || null,
        ts: Date.now()
      };

      /* Save to localStorage */
      saveReview(review);

      /* Inject card at top of grid */
      grid.insertAdjacentHTML('afterbegin', buildCard(review));
      updateDistribution();
      updatePhotoGallery();
      bindLightbox();

      /* Show success */
      if (formContent) formContent.style.display = 'none';
      if (successEl) successEl.classList.add('is-visible');

      /* Reset form */
      form.reset();
      currentRating = 0;
      if (starInput) setInputStars(0);
      uploadedPhoto = null;
      if (photoPreview) photoPreview.innerHTML = '';

      /* Close modal after 2s */
      setTimeout(function() {
        if (overlay) {
          overlay.classList.remove('is-open');
          document.body.style.overflow = '';
        }
      }, 2000);
    });
  }

  /* ── Lightbox ── */
  function bindLightbox() {
    var lb = document.querySelector('[data-loox-lightbox-overlay]');
    if (!lb) return;
    var lbImg = lb.querySelector('img');
    var lbClose = lb.querySelector('[data-loox-lightbox-close]');
    document.querySelectorAll('[data-loox-lightbox]').forEach(function(el) {
      if (el._looxBound) return;
      el._looxBound = true;
      el.style.cursor = 'pointer';
      el.addEventListener('click', function() {
        lbImg.src = el.getAttribute('data-loox-lightbox');
        lb.classList.add('is-open');
      });
    });
    if (lbClose && !lbClose._looxBound) {
      lbClose._looxBound = true;
      lbClose.addEventListener('click', function() { lb.classList.remove('is-open'); });
      lb.addEventListener('click', function(e) { if (e.target === lb) lb.classList.remove('is-open'); });
    }
  }

  /* ── Init ── */
  renderSavedReviews();

})();
</script>

{% schema %}
{
  "name": "Loox Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Real Reviews From Real People"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "See why 10,000+ people made the switch to natural relief"
    },
    {
      "type": "text",
      "id": "avg_rating",
      "label": "Average rating",
      "default": "4.8"
    },
    {
      "type": "text",
      "id": "total_reviews",
      "label": "Total reviews",
      "default": "1,200+"
    },
    {
      "type": "text",
      "id": "recommend_pct",
      "label": "Recommend percentage",
      "default": "97"
    },
    {
      "type": "checkbox",
      "id": "show_distribution",
      "label": "Show star distribution bars",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_photos",
      "label": "Show photo gallery",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_form",
      "label": "Show Write a Review button & form",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Reviewer photo"
        },
        {
          "type": "image_picker",
          "id": "photo",
          "label": "Review photo (product in use)"
        },
        {
          "type": "range",
          "id": "stars",
          "label": "Stars",
          "min": 1,
          "max": 5,
          "default": 5
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Review title",
          "default": "Life changer!"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review text",
          "default": "I was popping 4 Advil a day for my migraines. Now I just reach for this stick. My liver thanks me."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Reviewer name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "Texas"
        },
        {
          "type": "text",
          "id": "date",
          "label": "Date",
          "default": "2 weeks ago"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Loox Reviews",
      "blocks": [
        { "type": "review", "settings": { "stars": 5, "review_title": "Goodbye Advil", "text": "I was popping 4 Advil a day for my migraines. Now I just reach for this stick. My liver thanks me.", "name": "Sarah M.", "location": "Texas", "date": "2 weeks ago" } },
        { "type": "review", "settings": { "stars": 5, "review_title": "Essential for long drives", "text": "I drive 11 hours a day. Energy drinks were destroying my stomach. This thing keeps me sharp without the crash.", "name": "Marco V.", "location": "Ohio", "date": "1 week ago" } },
        { "type": "review", "settings": { "stars": 5, "review_title": "Bought it as a joke...", "text": "I bought it as a joke for my husband. He now panics if he can't find it before leaving the house.", "name": "Anna P.", "location": "Portland", "date": "3 days ago" } },
        { "type": "review", "settings": { "stars": 4, "review_title": "Works great, wish it lasted longer", "text": "The instant relief is real. I use it every day at work. Only reason for 4 stars is I wish the scent lasted a bit longer.", "name": "David R.", "location": "Chicago", "date": "5 days ago" } },
        { "type": "review", "settings": { "stars": 5, "review_title": "12-hour shifts? No problem", "text": "Working 12-hour nursing shifts, this keeps me going. Natural and it actually works. Already ordered 3 more for my colleagues.", "name": "Michelle T.", "location": "Houston", "date": "1 week ago" } },
        { "type": "review", "settings": { "stars": 5, "review_title": "My whole family uses these", "text": "My whole family uses these now. Best natural remedy we've found. My dad carries one in his shirt pocket everywhere.", "name": "James K.", "location": "New York", "date": "4 days ago" } }
      ]
    }
  ]
}
{% endschema %}
