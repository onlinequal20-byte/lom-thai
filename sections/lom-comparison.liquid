{{ 'lom-natural.css' | asset_url | stylesheet_tag }}

<section class="lom-compare" id="why-lom-thai">
  <div class="lom-container">
    <div class="lom-compare__header lom-fade-in">
      {% if section.settings.eyebrow != blank %}
        <span class="lom-compare__eyebrow">{{ section.settings.eyebrow }}</span>
      {% endif %}
      <h2 class="lom-heading">{{ section.settings.heading }}</h2>
      {% if section.settings.subtitle != blank %}
        <p class="lom-heading-subtitle">{{ section.settings.subtitle }}</p>
      {% endif %}
    </div>

    {% assign competitor_blocks = section.blocks | where: 'type', 'competitor' %}
    {% assign row_blocks = section.blocks | where: 'type', 'row' %}

    {%- comment -%} DESKTOP: Full table {%- endcomment -%}
    <div class="lom-compare__table-wrap lom-compare__desktop lom-fade-in">
      <table class="lom-compare__table" role="table">
        <thead>
          <tr>
            <th class="lom-compare__th lom-compare__th--feature"></th>
            <th class="lom-compare__th lom-compare__th--brand">
              <div class="lom-compare__brand-badge">
                <svg class="lom-compare__crown" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5z"/><rect x="5" y="17" width="14" height="2" rx="1"/></svg>
                <span>{{ section.settings.brand_name }}</span>
              </div>
            </th>
            {% for comp in competitor_blocks %}
              <th class="lom-compare__th lom-compare__th--comp" {{ comp.shopify_attributes }}>
                {{ comp.settings.name }}
              </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for block in row_blocks %}
            <tr class="lom-compare__tr" {{ block.shopify_attributes }}>
              <td class="lom-compare__td lom-compare__td--feature">{{ block.settings.feature }}</td>
              <td class="lom-compare__td lom-compare__td--brand">
                {% assign bv = block.settings.brand_value %}
                {% if bv contains '✓' %}
                  <span class="lom-compare__icon lom-compare__icon--yes">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  </span>
                {% endif %}
                <span class="lom-compare__val">{{ bv | remove: '✓' | remove: '✗' | strip }}</span>
              </td>
              {% assign comp_values = block.settings.competitor_1 | append: '|||' | append: block.settings.competitor_2 | append: '|||' | append: block.settings.competitor_3 | append: '|||' | append: block.settings.competitor_4 %}
              {% assign comp_array = comp_values | split: '|||' %}
              {% for val in comp_array %}
                {% if forloop.index0 < competitor_blocks.size and val != blank %}
                  <td class="lom-compare__td lom-compare__td--comp {% if val contains '✗' %}lom-compare__td--fail{% elsif val contains '✓' %}lom-compare__td--pass{% endif %}">
                    {% if val contains '✗' %}
                      <span class="lom-compare__icon lom-compare__icon--no">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                      </span>
                    {% elsif val contains '✓' %}
                      <span class="lom-compare__icon lom-compare__icon--partial">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                      </span>
                    {% endif %}
                    <span>{{ val | remove: '✓' | remove: '✗' | strip }}</span>
                  </td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {%- comment -%} MOBILE: Premium card with brand vs others {%- endcomment -%}
    <div class="lom-compare__mobile lom-fade-in">
      <div class="lom-compare__m-card">
        <div class="lom-compare__m-head">
          <div class="lom-compare__m-head-brand">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5z"/><rect x="5" y="17" width="14" height="2" rx="1"/></svg>
            <span>{{ section.settings.brand_name }}</span>
          </div>
          <span class="lom-compare__m-head-vs">vs</span>
          <span class="lom-compare__m-head-other">Others</span>
        </div>
        <div class="lom-compare__m-body">
          {% for block in row_blocks %}
            {% assign bv = block.settings.brand_value | remove: '✓' | remove: '✗' | strip %}
            {% assign cv = block.settings.competitor_1 | remove: '✓' | remove: '✗' | strip %}
            <div class="lom-compare__m-row" {{ block.shopify_attributes }}>
              <div class="lom-compare__m-feature">{{ block.settings.feature }}</div>
              <div class="lom-compare__m-vals">
                <span class="lom-compare__m-brand-val">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                  {% if bv != blank %}{{ bv }}{% else %}Yes{% endif %}
                </span>
                <span class="lom-compare__m-other-val">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </span>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="lom-compare__cta lom-fade-in">
      <a href="{{ section.settings.cta_url | default: '#lom-product-form' }}" class="lom-btn-primary lom-btn-large">{{ section.settings.cta_button | default: 'Try Lom Thai Risk-Free' }}</a>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Lom Comparison",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "The Truth"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Stop Settling for Relief That Hurts You"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "See why 10,000+ people switched"
    },
    {
      "type": "text",
      "id": "brand_name",
      "label": "Your brand name",
      "default": "Lom Thai"
    },
    {
      "type": "textarea",
      "id": "brand_tagline",
      "label": "Brand description",
      "default": "5 natural ingredients. Century-old Thai formula. Works in seconds. Lasts months per stick. 30-day guarantee."
    },
    {
      "type": "text",
      "id": "cta_button",
      "label": "CTA button text",
      "default": "Try Lom Thai Risk-Free"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "CTA button link"
    }
  ],
  "blocks": [
    {
      "type": "competitor",
      "name": "Competitor column",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Competitor name",
          "default": "Energy Drinks"
        },
        {
          "type": "textarea",
          "id": "enemy_copy",
          "label": "Enemy framing copy",
          "default": "Caffeine + sugar + taurine. Your heart pays the price."
        }
      ]
    },
    {
      "type": "row",
      "name": "Comparison row",
      "settings": [
        {
          "type": "text",
          "id": "feature",
          "label": "Feature name",
          "default": "Works instantly"
        },
        {
          "type": "text",
          "id": "brand_value",
          "label": "Your brand value",
          "default": "✓ Seconds"
        },
        {
          "type": "text",
          "id": "competitor_1",
          "label": "Competitor 1 value",
          "default": "✗ 15-30 min"
        },
        {
          "type": "text",
          "id": "competitor_2",
          "label": "Competitor 2 value",
          "default": "✗ 5-10 min"
        },
        {
          "type": "text",
          "id": "competitor_3",
          "label": "Competitor 3 value",
          "default": "✗ 20-45 min"
        },
        {
          "type": "text",
          "id": "competitor_4",
          "label": "Competitor 4 value",
          "default": "✗ Varies"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lom Comparison",
      "blocks": [
        { "type": "competitor", "settings": { "name": "Energy Drinks", "enemy_copy": "Caffeine + sugar + taurine. Your heart pays the price." } },
        { "type": "competitor", "settings": { "name": "Pharmacy Sprays", "enemy_copy": "Oxymetazoline addiction is real. Google 'rebound congestion.'" } },
        { "type": "competitor", "settings": { "name": "Coffee", "enemy_copy": "Anxiety, acid reflux, stained teeth, and you're still tired by 2pm." } },
        { "type": "competitor", "settings": { "name": "Amazon Generics", "enemy_copy": "Mass-produced. Unknown ingredients. No heritage. No guarantee." } },
        { "type": "row", "settings": { "feature": "Works instantly", "brand_value": "✓ Seconds", "competitor_1": "✗ 15-30 min", "competitor_2": "✗ 5-10 min", "competitor_3": "✗ 20-45 min", "competitor_4": "✗ Varies" } },
        { "type": "row", "settings": { "feature": "100% Natural", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✗ No", "competitor_3": "✓ Yes", "competitor_4": "✗ Unknown" } },
        { "type": "row", "settings": { "feature": "No crash or jitters", "brand_value": "✓ None", "competitor_1": "✗ Crash + jitters", "competitor_2": "✗ Rebound congestion", "competitor_3": "✗ Anxiety + crash", "competitor_4": "✗ Unknown" } },
        { "type": "row", "settings": { "feature": "Headache comfort", "brand_value": "✓ Traditional use", "competitor_1": "✗ No", "competitor_2": "✗ No", "competitor_3": "✗ No", "competitor_4": "✗ Unverified" } },
        { "type": "row", "settings": { "feature": "Portable & TSA-friendly", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✓ Yes", "competitor_3": "✗ No", "competitor_4": "✓ Yes" } },
        { "type": "row", "settings": { "feature": "Monthly cost", "brand_value": "✓ One $8 stick lasts months", "competitor_1": "✗ $60-120/mo", "competitor_2": "✗ $15-30/mo", "competitor_3": "✗ $90-180/mo", "competitor_4": "✗ Varies" } }
      ]
    }
  ]
}
{% endschema %}
