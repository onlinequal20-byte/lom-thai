{{ 'lom-natural.css' | asset_url | stylesheet_tag }}

<section class="lom-compare" id="why-lom-thai">
  <div class="lom-container">
    {%- comment -%} Eyebrow + heading {%- endcomment -%}
    <div class="lom-compare__header lom-fade-in">
      {% if section.settings.eyebrow != blank %}
        <span class="lom-compare__eyebrow">{{ section.settings.eyebrow }}</span>
      {% endif %}
      <h2 class="lom-heading">{{ section.settings.heading }}</h2>
      {% if section.settings.subtitle != blank %}
        <p class="lom-heading-subtitle">{{ section.settings.subtitle }}</p>
      {% endif %}
    </div>

    {%- comment -%} Responsive comparison grid {%- endcomment -%}
    <div class="lom-compare__grid lom-fade-in">
      {% for block in section.blocks %}
        {% if block.type == 'row' %}
          <div class="lom-compare__card" {{ block.shopify_attributes }}>
            <div class="lom-compare__card-feature">{{ block.settings.feature }}</div>
            <div class="lom-compare__card-columns">
              <div class="lom-compare__card-brand">
                <span class="lom-compare__card-label">{{ section.settings.brand_name }}</span>
                <span class="lom-compare__card-value lom-compare__card-value--win">
                  {% assign bv = block.settings.brand_value %}
                  {% if bv contains '✓' or bv contains 'Yes' or bv contains 'Seconds' %}
                    <span class="lom-compare__check">✓</span>
                  {% endif %}
                  <span>{{ bv | remove: '✓' | strip }}</span>
                </span>
              </div>
              {% assign comp_values = block.settings.competitor_1 | append: '|||' | append: block.settings.competitor_2 | append: '|||' | append: block.settings.competitor_3 %}
              {% assign comp_array = comp_values | split: '|||' %}
              {% assign comp_index = 0 %}
              {% for b in section.blocks %}
                {% if b.type == 'competitor' %}
                  <div class="lom-compare__card-competitor">
                    <span class="lom-compare__card-label">{{ b.settings.name }}</span>
                    {% assign cv = comp_array[comp_index] %}
                    <span class="lom-compare__card-value {% if cv contains '✗' or cv contains 'No' %}lom-compare__card-value--lose{% endif %}">
                      {% if cv contains '✗' or cv contains 'No' %}
                        <span class="lom-compare__cross">✗</span>
                      {% endif %}
                      <span>{{ cv | remove: '✗' | remove: '✓' | strip }}</span>
                    </span>
                    {% assign comp_index = comp_index | plus: 1 %}
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {%- comment -%} Bottom CTA {%- endcomment -%}
    <div class="lom-compare__cta lom-fade-in">
      <p class="lom-compare__cta-text">{{ section.settings.cta_text | default: 'Join 50,000+ people who chose the natural alternative' }}</p>
      <a href="{{ section.settings.cta_url | default: '#lom-product-form' }}" class="lom-btn-primary lom-btn-large">{{ section.settings.cta_button | default: 'Try Siam Lom Risk-Free' }}</a>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Lom Comparison",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "The Clear Winner"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Why Siam Lom?"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "See how we stack up against the alternatives"
    },
    {
      "type": "text",
      "id": "brand_name",
      "label": "Your brand name",
      "default": "Siam Lom"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA text",
      "default": "Join 50,000+ people who chose the natural alternative"
    },
    {
      "type": "text",
      "id": "cta_button",
      "label": "CTA button text",
      "default": "Try Siam Lom Risk-Free"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "CTA button link"
    }
  ],
  "blocks": [
    {
      "type": "competitor",
      "name": "Competitor column",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Competitor name",
          "default": "Energy Drinks"
        }
      ]
    },
    {
      "type": "row",
      "name": "Comparison row",
      "settings": [
        {
          "type": "text",
          "id": "feature",
          "label": "Feature name",
          "default": "Works instantly"
        },
        {
          "type": "text",
          "id": "brand_value",
          "label": "Your brand value",
          "default": "✓ Seconds"
        },
        {
          "type": "text",
          "id": "competitor_1",
          "label": "Competitor 1 value",
          "default": "15-30 min"
        },
        {
          "type": "text",
          "id": "competitor_2",
          "label": "Competitor 2 value",
          "default": "5-10 min"
        },
        {
          "type": "text",
          "id": "competitor_3",
          "label": "Competitor 3 value",
          "default": "20-45 min"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lom Comparison",
      "blocks": [
        { "type": "competitor", "settings": { "name": "Energy Drinks" } },
        { "type": "competitor", "settings": { "name": "Pharmacy Sprays" } },
        { "type": "competitor", "settings": { "name": "Coffee" } },
        { "type": "row", "settings": { "feature": "Works instantly", "brand_value": "✓ Seconds", "competitor_1": "✗ 15-30 min", "competitor_2": "✗ 5-10 min", "competitor_3": "✗ 20-45 min" } },
        { "type": "row", "settings": { "feature": "100% Natural", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✗ No", "competitor_3": "✓ Yes" } },
        { "type": "row", "settings": { "feature": "No crash or jitters", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✓ Yes", "competitor_3": "✗ No" } },
        { "type": "row", "settings": { "feature": "Relieves headaches", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✗ No", "competitor_3": "✗ No" } },
        { "type": "row", "settings": { "feature": "Clears congestion", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✓ Yes", "competitor_3": "✗ No" } },
        { "type": "row", "settings": { "feature": "Portable & TSA-friendly", "brand_value": "✓ Yes", "competitor_1": "✗ No", "competitor_2": "✓ Yes", "competitor_3": "✗ No" } },
        { "type": "row", "settings": { "feature": "Cost per use", "brand_value": "$0.03", "competitor_1": "$2-4", "competitor_2": "$0.50", "competitor_3": "$3-6" } }
      ]
    }
  ]
}
{% endschema %}
