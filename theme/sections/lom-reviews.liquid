{{ 'lom-natural.css' | asset_url | stylesheet_tag }}

<section class="lom-reviews">
  <div class="lom-container">
    <h2 class="lom-heading lom-fade-in">{{ section.settings.heading }}</h2>
    {% if section.settings.subtitle != blank %}
      <p class="lom-heading-subtitle lom-fade-in">{{ section.settings.subtitle }}</p>
    {% endif %}

    <div class="lom-reviews-summary lom-fade-in">
      <div class="lom-reviews-summary__score">
        <div class="lom-reviews-summary__number">{{ section.settings.avg_rating | default: '4.9' }}</div>
        <div class="lom-reviews-summary__stars">★★★★★</div>
      </div>
      <div class="lom-reviews-summary__meta">
        <strong>{{ section.settings.total_reviews | default: '2,847' }} Reviews</strong>
        <span>{{ section.settings.recommend_pct | default: '98' }}% recommend this product</span>
      </div>
    </div>

    <div class="lom-reviews-grid">
      {% for block in section.blocks %}
        <div class="lom-review-card lom-fade-in" {{ block.shopify_attributes }}>
          <div class="lom-review-stars">
            {% assign stars = block.settings.stars | default: 5 %}
            {% for i in (1..stars) %}
              <span class="lom-review-star">★</span>
            {% endfor %}
          </div>
          <p class="lom-review-text">"{{ block.settings.text }}"</p>
          <div class="lom-review-author">
            <div class="lom-review-avatar">{{ block.settings.name | truncate: 2, '' | upcase }}</div>
            <div class="lom-review-author-info">
              <strong>{{ block.settings.name }}</strong>
              {% if block.settings.location != blank %}
                <span>{{ block.settings.location }}</span>
              {% endif %}
              <span class="lom-review-verified">✓ Verified Purchase</span>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Lom Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "What People Are Saying"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Real results from real customers around the world"
    },
    {
      "type": "text",
      "id": "avg_rating",
      "label": "Average rating",
      "default": "4.9"
    },
    {
      "type": "text",
      "id": "total_reviews",
      "label": "Total reviews",
      "default": "2,847"
    },
    {
      "type": "text",
      "id": "recommend_pct",
      "label": "Recommend percentage",
      "default": "98"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "range",
          "id": "stars",
          "label": "Stars",
          "min": 1,
          "max": 5,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review text",
          "default": "I use this every single day. Clears my head in seconds and the rollerball is perfect for my tension headaches."
        },
        {
          "type": "text",
          "id": "name",
          "label": "Reviewer name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location",
          "default": "California, USA"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lom Reviews",
      "blocks": [
        { "type": "review", "settings": { "stars": 5, "text": "I use this every single day. Clears my head in seconds and the rollerball is perfect for my tension headaches.", "name": "Sarah M.", "location": "California, USA" } },
        { "type": "review", "settings": { "stars": 5, "text": "I'm a truck driver and this is a lifesaver. One sniff and I'm alert again. Bought 5 more for friends.", "name": "Marco V.", "location": "Germany" } },
        { "type": "review", "settings": { "stars": 5, "text": "Finally something natural that actually works. I've replaced my afternoon coffee with this. No crash, just clarity.", "name": "Emma L.", "location": "London, UK" } }
      ]
    }
  ]
}
{% endschema %}
