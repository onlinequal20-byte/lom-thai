{% style %}
  .block-{{ block.id }} {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    gap: {{ block.settings.gap_between_cards }}px;
    padding-top: {{ block.settings.padding_top }}px;
    padding-bottom: {{ block.settings.padding_bottom }}px;
    padding-left: 0;
    padding-right: 0;
    justify-content: {{ block.settings.cards_layout }};
  }
  
  .block-{{ block.id }} .rich-text__card {
    flex: 0 0 calc(25% - {{ block.settings.gap_between_cards | times: 0.75 }}px);
    max-width: calc(25% - {{ block.settings.gap_between_cards | times: 0.75 }}px);
  }
  
  @media screen and (max-width: 1024px) {
    .block-{{ block.id }} .rich-text__card {
      flex: 0 0 calc(50% - {{ block.settings.gap_between_cards | divided_by: 2 }}px);
      max-width: calc(50% - {{ block.settings.gap_between_cards | divided_by: 2 }}px);
    }
  }
  
  @media screen and (max-width: 768px) {
    .block-{{ block.id }} .rich-text__card {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }
  .block-{{ block.id }} .rich-text__card {
    display: flex;
    height: auto;
    padding: 22px 37px;
    background: rgba({{ block.settings.bg_color.red }}, {{ block.settings.bg_color.green }}, {{ block.settings.bg_color.blue }}, {{ block.settings.background_opacity | divided_by: 100.0 }});
    border: 0.5px solid {{ block.settings.border_color }};
    border-radius: {{ block.settings.border_radius }}px;
    font-size: {{ block.settings.font_size }}px;
    line-height: calc(100% + 11px);
    color: {{ block.settings.color }};
    text-align: {{ block.settings.text_alignment }};
    max-width: 100%;
  }
  .block-{{ block.id }} .rich-text__card p {
    margin: 0;
  }

{% endstyle %}
{% capture cards %}
  {% content_for 'blocks' %}
{% endcapture %}
{% assign has_cards = false %}
{% if cards contains '<!-- start_rich_text_list_card -->' %}
  {% assign has_cards = true %}
{% endif %}
{% comment %} {% if cards_count > 0 %} {% endcomment %}
<ul class="rich-text__cards block-{{ block.id }}" {% if has_cards %}style="margin-top: 37px;"{% endif %} {{ block.shopify_attributes }}>
  {% for card in cards %}
    {{ card }}
  {% endfor %}
</ul>
{% comment %} {% endif %} {% endcomment %}
{% schema %}
{
  "name": "t:blocks._rich_text_list_cards.name",
  "blocks": [
    {
      "type": "_rich-text-list-card"
    }
  ],
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "t:blocks._rich_text_list_cards.settings.layout_header.content"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "t:blocks._rich_text_list_cards.settings.text_alignment.label",
      "options": [
        { "value": "left", "label": "t:blocks._rich_text_list_cards.settings.text_alignment.options.left" },
        { "value": "center", "label": "t:blocks._rich_text_list_cards.settings.text_alignment.options.center" },
        { "value": "right", "label": "t:blocks._rich_text_list_cards.settings.text_alignment.options.right" }
      ],
      "default": "center" 
    },
    {
      "type": "select",
      "id": "cards_layout",
      "label": "t:blocks._rich_text_list_cards.settings.cards_layout.label",
      "options": [
        { "value": "left", "label": "t:blocks._rich_text_list_cards.settings.cards_layout.options.left" },
        { "value": "center", "label": "t:blocks._rich_text_list_cards.settings.cards_layout.options.center" },
        { "value": "right", "label": "t:blocks._rich_text_list_cards.settings.cards_layout.options.right" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "t:blocks._rich_text_list_cards.settings.typography_header.content"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "t:blocks._rich_text_list_cards.settings.font_size.label",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "color",
      "label": "t:blocks._rich_text_list_cards.settings.color.label",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "t:blocks._rich_text_list_cards.settings.appearance_header.content"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "t:blocks._rich_text_list_cards.settings.bg_color.label",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "background_opacity",
      "label": "t:blocks._rich_text_list_cards.settings.background_opacity.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 45
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "t:blocks._rich_text_list_cards.settings.border_color.label",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "t:blocks._rich_text_list_cards.settings.border_radius.label",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 10
    },
    {
      "type": "range",
      "id": "gap_between_cards",
      "label": "t:blocks._rich_text_list_cards.settings.gap_between_cards.label",
      "min": 4,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "header",
      "content": "t:blocks._rich_text_list_cards.settings.padding_header.content"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:blocks._rich_text_list_cards.settings.padding_top.label",
      "min": 0,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:blocks._rich_text_list_cards.settings.padding_bottom.label",
      "min": 0,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "t:blocks._rich_text_list_cards.presets.name",
      "blocks": [
        {
          "type": "_rich-text-list-card"
        },
        {
          "type": "_rich-text-list-card"
        },
        {
          "type": "_rich-text-list-card"
        },
        {
          "type": "_rich-text-list-card"
        }
      ]
    }
  ]
}
{% endschema %}
